<!DOCTYPE html>
<html lang="sk" class="notranslate" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Continental 2026 - Finál</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .shutdown-pattern { background-image: repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(239, 68, 68, 0.1) 5px, rgba(239, 68, 68, 0.1) 10px); }
        .day-num { color: #000000 !important; font-weight: 900 !important; font-size: 1.1rem; }
        .nočná .day-num { color: #ffffff !important; }
        @media print {
            @page { size: A4 landscape; margin: 0.5cm; }
            .no-print { display: none !important; }
            .month-card { break-inside: avoid; border: 1px solid #e2e8f0 !important; shadow: none !important; }
        }
    </style>
</head>
<body id="bodyTag" class="bg-slate-100 p-2 md:p-4 text-slate-900">
    <div class="max-w-[1600px] mx-auto">
        <header class="bg-white rounded-3xl shadow-sm border border-slate-200 p-4 mb-6 no-print">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="flex items-center gap-3">
                    <div class="bg-orange-500 p-2 rounded-2xl shadow-lg shadow-orange-200">
                        <i data-lucide="factory" class="text-white w-6 h-6"></i>
                    </div>
                    <div>
                        <h1 class="font-black text-2xl tracking-tighter text-slate-800 uppercase italic">Continental 2026</h1>
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-none">Smenový Kalendár • 28-dňový cyklus</p>
                    </div>
                </div>

                <div id="teamButtons" class="flex p-1 bg-slate-100 rounded-2xl w-full md:w-auto"></div>

                <div class="flex gap-2 w-full md:w-auto">
                    <button onclick="window.print()" class="flex-1 md:flex-none bg-white border border-slate-200 px-4 py-3 rounded-2xl font-bold text-xs flex items-center justify-center gap-2 hover:bg-slate-50 transition-all">
                        <i data-lucide="printer" class="w-4 h-4 text-slate-500"></i> TLAČ (A4)
                    </button>
                </div>
            </div>
        </header>

        <div id="calendarGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-6"></div>

        <footer class="bg-white rounded-3xl border border-slate-200 p-6 no-print">
            <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                <div class="flex items-center gap-3 p-3 bg-orange-50 rounded-2xl border border-orange-100">
                    <div class="w-10 h-10 bg-orange-500 rounded-xl flex items-center justify-center text-white font-black shadow-sm">R</div>
                    <span class="text-[10px] font-black uppercase text-slate-600">Ranná</span>
                </div>
                <div class="flex items-center gap-3 p-3 bg-blue-50 rounded-2xl border border-blue-100">
                    <div class="w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center text-black font-black shadow-sm">P</div>
                    <span class="text-[10px] font-black uppercase text-slate-600">Poobedná</span>
                </div>
                <div class="flex items-center gap-3 p-3 bg-slate-900 rounded-2xl border border-slate-800">
                    <div class="w-10 h-10 bg-slate-800 rounded-xl flex items-center justify-center text-white font-black shadow-sm">N</div>
                    <span class="text-[10px] font-black uppercase text-slate-300">Nočná</span>
                </div>
                <div class="flex items-center gap-3 p-3 bg-green-50 rounded-2xl border border-green-200">
                    <div class="w-10 h-10 bg-green-600 rounded-xl flex items-center justify-center text-white font-black shadow-sm italic">€</div>
                    <span class="text-[10px] font-black uppercase text-slate-600">Výplata</span>
                </div>
                <div class="flex items-center gap-3 p-3 bg-red-50 rounded-2xl border border-red-200 shutdown-pattern">
                    <div class="w-10 h-10 border-2 border-red-500 rounded-xl"></div>
                    <span class="text-[10px] font-black uppercase text-red-600 tracking-tighter">Odstávka</span>
                </div>
            </div>
        </footer>
    </div>

    <script>
        let currentTeam = 'C';
        const months = ['Január','Február','Marec','Apríl','Máj','Jún','Júl','August','September','Október','November','December'];
        const payDays = {0:9, 1:6, 2:6, 3:9, 4:8, 5:5, 6:7, 7:7, 8:7, 9:7, 10:6, 11:7};
        const holidays = ['2026-01-01','2026-01-06','2026-04-03','2026-04-06','2026-05-01','2026-05-08','2026-07-05','2026-08-29','2026-09-01','2026-09-15','2026-11-01','2026-11-17','2026-12-24','2026-12-25','2026-12-26'];

        // Cyklus 28 dní: 4R, 3N, 4V, 3R, 4N, 3V, 5P, 2V
        const pattern = [
            'R','R','R','R', 'N','N','N', 'V','V','V','V', 
            'R','R','R', 'N','N','N','N', 'V','V','V', 
            'P','P','P','P','P', 'V','V'
        ];

        function getShift(date, team) {
            const refDate = new Date(2026, 1, 2); // 2.2.2026 ranná pre C
            const diffDays = Math.round((date - refDate) / 86400000);
            const offsets = { 'C': 0, 'A': 7, 'B': 14, 'D': 21 };
            const idx = ((diffDays + offsets[team]) % 28 + 28) % 28;
            const s = pattern[idx];
            return s === 'V' ? '' : s;
        }

        function render() {
            const grid = document.getElementById('calendarGrid');
            grid.innerHTML = '';
            months.forEach((name, mIdx) => {
                let hours = 0;
                const card = document.createElement('div');
                card.className = "month-card bg-white p-4 rounded-[2.5rem] shadow-sm border border-slate-200";
                let h = `<div class="flex justify-between items-center mb-4 px-2"><h2 class="font-black text-slate-800 uppercase italic tracking-tighter text-sm">${name}</h2><div class="bg-slate-100 px-3 py-1 rounded-full text-[9px] font-black text-slate-500 uppercase tracking-widest h-sum"></div></div><div class="grid grid-cols-7 gap-1 text-[9px] font-black text-slate-300 text-center mb-2 uppercase italic"><div>Po</div><div>Ut</div><div>St</div><div>Št</div><div>Pi</div><div>So</div><div>Ne</div></div><div class="grid grid-cols-7 gap-1">`;
                
                const first = new Date(2026, mIdx, 1);
                for(let i=1; i<(first.getDay()||7); i++) h += '<div></div>';
                
                for(let d=1; d<=new Date(2026, mIdx+1, 0).getDate(); d++) {
                    const date = new Date(2026, mIdx, d);
                    const dateStr = date.toISOString().split('T')[0];
                    const shift = getShift(date, currentTeam);
                    const isPay = (d === payDays[mIdx]);
                    const isHol = holidays.includes(dateStr);
                    const isShut = (mIdx === 0 && d <= 6) || (dateStr >= '2026-07-20' && dateStr <= '2026-08-02') || (dateStr >= '2026-12-22' && dateStr <= '2026-12-31');

                    if(shift) hours += 8;
                    let c = "bg-slate-50";
                    if(shift==='R') c = "bg-orange-500 shadow-lg shadow-orange-100";
                    if(shift==='P') c = "bg-blue-500 shadow-lg shadow-blue-100";
                    if(shift==='N') c = "bg-slate-900 nočná shadow-lg shadow-slate-200";
                    if(isPay) c = "bg-green-600 ring-2 ring-green-200";
                    
                    h += `<div class="h-10 flex flex-col items-center justify-center rounded-xl relative ${c} ${isShut && !isPay ? 'shutdown-pattern ring-1 ring-red-200' : ''} ${isHol && !isPay ? 'ring-1 ring-red-400' : ''}">
                            <span class="day-num">${d}</span>
                            <span class="text-[8px] font-black ${shift==='N'||isPay?'text-white':'text-black'}">${isPay && !shift ? '€' : shift}</span>
                          </div>`;
                }
                h += `</div>`;
                card.innerHTML = h; 
                card.querySelector('.h-sum').innerText = hours + ' Hod';
                grid.appendChild(card);
            });
            lucide.createIcons();
        }

        const btnCont = document.getElementById('teamButtons');
        ['A','B','C','D'].forEach(t => {
            const b = document.createElement('button');
            b.innerText = t;
            b.className = `flex-1 py-2 px-4 rounded-xl font-black text-sm transition-all ` + (t === currentTeam ? "bg-orange-500 text-white shadow-md shadow-orange-200" : "text-slate-400 hover:text-slate-600");
            b.onclick = () => { currentTeam = t; render(); updateBtn(); };
            btnCont.appendChild(b);
        });
        function updateBtn() {
            document.querySelectorAll('#teamButtons button').forEach(el => {
                const active = el.innerText === currentTeam;
                el.className = `flex-1 py-2 px-4 rounded-xl font-black text-sm transition-all ` + (active ? "bg-orange-500 text-white shadow-md shadow-orange-200" : "text-slate-400 hover:text-slate-600");
            });
        }
        render();
    </script>
</body>
</html>
